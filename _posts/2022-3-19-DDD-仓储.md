---
layout: post
keywords: 仓储
description: DDD 仓储
title: DDD 仓储
categories: [架构]
tags: [DDD]
group: archive
icon: google
---

{% include sunminghui81/setup %}

## 了解仓储
仓储是永久保存领域对象的仓库；在DDD中引入这个概念，是为了隔离业务领域和不同的数据库。  
一个对象可以保存到关系数据库，也可以保存到NoSql中；具体的保存形式与数据结构的变化不会对领域对象的实现产生影响。

### 实现仓储
在DDD中，仓储模式替代了[DAO]()；  
仓储与DAO的主要区别：  
- 仓储主要是为了保证聚合根对象的加载和保存，同时兼顾一些实体的直接访问；
- DAO没有这些约束；没有数据所有权概念，没有聚合概念；是数据持久化的接口；


### 那些逻辑放在领域服务中
- 领域行为需要多个领域实体参与协作
- 领域行为与状态无关
- 领域行为需要与外部资源（尤其是DB）协作


## 建模领域服务
- 需要确定创建的领域服务是否需要一个独立的接口
- 给领域服务的实现类命名
- 为领域服务创建一个迷你层
- 最后测试领域服务

## 参考文献
1. 《实现领域驱动设计》   --- Vaughn Vernon
2. [何时定义领域服务](http://zhangyi.xyz/example-of-define-domain-service/)   --- 张逸